#!/bin/sh

# made some changes because it not working as expected on my device

# Prints the current volume or ðŸ”‡ if muted.

case $BLOCK_BUTTON in
    1) setsid -w -f "$TERMINAL" -e pulsemixer; pkill -RTMIN+10 dwmblocks ;;
    2) pamixer --toggle-mute; pkill -RTMIN+10 dwmblocks ;;
    4) pamixer --increase 5; pkill -RTMIN+10 dwmblocks ;;
    5) pamixer --decrease 5; pkill -RTMIN+10 dwmblocks ;;
    3) notify-send "ðŸ“¢ Volume module" "\- Shows volume ðŸ”Š, ðŸ”‡ if muted.
- Middle click to mute.
- Scroll to change." ;;
    6) setsid -f "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

# "pamixer --get-volume-human" returns "muted" or "55%"
# This one command replaces the multiple checks in your old script.
vol_status=$(pamixer --get-volume-human)

# Check if muted
if [ "$vol_status" = "muted" ]; then
    echo "ðŸ”‡"
    exit 0
fi

# Extract the number (remove the %)
vol="${vol_status%\%}"

# Choose icon based on volume level
case 1 in
    $((vol >= 70)) ) icon="ðŸ”Š" ;;
    $((vol >= 30)) ) icon="ðŸ”‰" ;;
    $((vol >= 1)) )  icon="ðŸ”ˆ" ;;
    * )              icon="ðŸ”‡" ;;
esac

echo "$icon$vol%"
